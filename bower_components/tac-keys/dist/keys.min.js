(function(){"use strict";angular.module("module.tac.keys",[]).service("tac.keys",[function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;return m=[],n=[],k=[{key:"enter",code:13,stop:!0},{key:"back_space",code:8,stop:!0},{key:"left",code:37,stop:!0},{key:"up",code:38,stop:!0},{key:"right",code:39,stop:!0},{key:"down",code:40,stop:!0},{key:"info",code:457},{key:"red",code:403},{key:"green",code:404},{key:"yellow",code:405},{key:"blue",code:406},{key:"play",code:415},{key:"pause",code:19},{key:"rewind",code:412},{key:"fast_fwd",code:417},{key:"page_up",code:33},{key:"page_down",code:34},{key:"previous",code:422},{key:"next",code:423},{key:"go_back",code:166},{key:"subtitle",code:460},{key:"audio",code:176},{key:"favorites",code:372},{key:"help",code:47},{key:"menu",code:18},{key:"anterior",code:413},{key:"caps_lock",code:20},{key:"space_bar",code:32},{key:"shift",code:16},{key:"alt",code:18},{key:"acute",code:219},{key:"alt_gr",code:225}],l=[{key:"shift",code:16},{key:"alt_gr",code:225}],c=[{key:"menu",code:77},{key:"anterior",code:65},{key:"go_back",code:86},{key:"fast_fwd",code:75},{key:"rewind",code:74},{key:"pause",code:80},{key:"play",code:32},{key:"info",code:73},{key:"red",code:82},{key:"green",code:71},{key:"yellow",code:89},{key:"blue",code:66}],s=function(a,b){var c;return c=a.indexOf(b),c>-1&&a.splice(c,1)},p=function(a){return{is_letter:!0,key:"letter",letter:a}},r=function(a){return{is_number:!0,key:"number",number:a}},f=function(a){var b;return 192===a?p("Ã±"):a>=65&&90>=a?(b=String.fromCharCode(a+32),p(b)):void 0},g=function(a){return a>=48&&57>=a?r(a-48):a>=96&&105>=a?r(a-96):void 0},h=function(a){var b,c,d;for(c=0,d=k.length;d>c;c++)if(b=k[c],b.code===a)return b;return g(a)||f(a)},i=function(a){var b,c,d;for(c=0,d=l.length;d>c;c++)if(b=l[c],b.code===a)return b},e=function(a){var b,d,e;for(d=0,e=c.length;e>d;d++)if(b=c[d],b.code===a)return b},b=function(a){var b,c,d,e;for(e=[],c=0,d=m.length;d>c;c++)b=m[c],e.push(b.handle(a));return e},t=function(a){return console.log("unregistered key "+a),{key:"unknow",value:a}},d=function(){var a,b,c,d;for(d=[],b=0,c=m.length;c>b;b++)a=m[b],d.push(a.dump&&a.dump());return d},q=function(a){return{onkeydown:function(c){var d;return 17===c.keyCode?a.current=a.ctrl:(d=h(c.keyCode)||t(c.keyCode),b(d),d.stop&&!a.allow_default_once&&c.preventDefault(),a.allow_default_once&&(a.allow_default_once=!1),!0)}}},o=function(a){return{onkeydown:function(a){var c;return c=e(a.keyCode),c?(b(c),a.preventDefault()):68===a.keyCode?(console.log("dumping"),a.preventDefault(),d()):console.log("unregistered key "+a.keyCode)}}},j={allow_default_once:!1},j.normal=q(j),j.ctrl=o(j),j.current=j.normal,a=function(){function a(){}return a.subscribe=function(a){return m.push(a),function(){return s(m,a)}},a.unsubscribe=function(a){return s(m,a)},a.create_level=function(){return n.push(m),m=[]},a.previous_level=function(){return n.length>0?m=n.pop():console.error("trying to pop unique listener array from listeners_stack")},a.allow_default_once=function(){return j.allow_default_once=!0},a.bind_keydown=function(a){return a.onkeydown=function(a){return j.current.onkeydown(a)},a.onkeyup=function(a){var c;return 17===a.keyCode&&(j.current=j.normal),c=i(a.keyCode),c?(c.disable=!0,b(c)):void 0}},a}()}])}).call(this);